{{define "title"}}Your message{{end}}

{{define "main"}}

<div id="show-msg" class="show-msg">
  <div id="message-container">
    <div class="card load-msg-form">
        <div class="card-header">
            <h2 class="card-title">Access Message</h2>
            <p class="card-description">Enter your {{.PinSize}}-digit PIN to decrypt and view the message</p>
        </div>
        
        <form action="/download-file" method="post" id="load-msg-form" hx-boost="false">
            <input type="hidden" name="key" id="key" value="{{.Form.Key}}" />

            <div class="form-group">
                <input type="text"
                       name="pin"
                       id="pin"
                       class="pin-input {{if .Form.FieldErrors.pin}}error-input{{end}}"
                       required
                       maxlength="{{.PinSize}}"
                       inputmode="numeric"
                       pattern="[0-9]{{printf "{%d}" .PinSize}}"
                       placeholder="{{range $i := until .PinSize}}{{add $i 1}}{{end}}"
                       title="PIN must be exactly {{.PinSize}} digits"
                       aria-label="{{.PinSize}}-digit PIN"
                       autofocus />
                <div id="pin-error">
                    {{with .Form.FieldErrors.pin}}
                    <span class='error'>{{.}}</span>
                    {{end}}
                </div>
            </div>
            
            <button class="main-btn" type="submit">Decode Message</button>
        </form>
    </div>
  </div>
</div>
{{end}}